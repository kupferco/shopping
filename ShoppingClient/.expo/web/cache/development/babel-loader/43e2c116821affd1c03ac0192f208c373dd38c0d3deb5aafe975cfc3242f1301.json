{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useRef, useState } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport TouchableWithoutFeedback from \"react-native-web/dist/exports/TouchableWithoutFeedback\";\nimport Animated from \"react-native-web/dist/exports/Animated\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport Webcam from 'react-webcam';\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nvar WebCameraCapture = function WebCameraCapture(_ref) {\n  var onCapture = _ref.onCapture;\n  var webcamRef = useRef(null);\n  var flashOpacity = useRef(new Animated.Value(0)).current;\n  var _useState = useState(0),\n    _useState2 = _slicedToArray(_useState, 2),\n    tapCount = _useState2[0],\n    setTapCount = _useState2[1];\n  var captureImage = function captureImage() {\n    console.log('Capture image function called');\n    setTapCount(function (prev) {\n      return prev + 1;\n    });\n    if (webcamRef.current) {\n      console.log('Webcam ref exists');\n      var imageSrc = webcamRef.current.getScreenshot();\n      console.log('Screenshot:', !!imageSrc);\n      if (imageSrc) {\n        console.log('Image source exists');\n        Animated.sequence([Animated.timing(flashOpacity, {\n          toValue: 0.7,\n          duration: 100,\n          useNativeDriver: true\n        }), Animated.timing(flashOpacity, {\n          toValue: 0,\n          duration: 100,\n          useNativeDriver: true\n        })]).start();\n        setTimeout(function () {\n          onCapture(imageSrc);\n        }, 100);\n      }\n    }\n  };\n  return _jsxs(View, {\n    style: styles.container,\n    children: [_jsx(TouchableWithoutFeedback, {\n      onPress: captureImage,\n      children: _jsxs(View, {\n        style: styles.cameraContainer,\n        children: [_jsx(Webcam, {\n          audio: false,\n          ref: webcamRef,\n          screenshotFormat: \"image/jpeg\",\n          videoConstraints: {\n            facingMode: \"environment\",\n            width: {\n              ideal: Dimensions.get('window').height\n            },\n            height: {\n              ideal: Dimensions.get('window').width\n            }\n          },\n          style: styles.webcam\n        }), _jsxs(Text, {\n          style: styles.tapCountText,\n          children: [\"Taps: \", tapCount]\n        })]\n      })\n    }), _jsx(Animated.View, {\n      style: [styles.flashOverlay, {\n        opacity: flashOpacity\n      }]\n    })]\n  });\n};\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    position: 'relative'\n  },\n  cameraContainer: {\n    flex: 1,\n    overflow: 'hidden'\n  },\n  webcam: {\n    width: '100%',\n    height: '100%',\n    objectFit: 'cover'\n  },\n  flashOverlay: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    right: 0,\n    bottom: 0,\n    backgroundColor: 'white',\n    zIndex: 10\n  },\n  tapCountText: {\n    position: 'absolute',\n    top: 20,\n    left: 20,\n    color: 'white',\n    backgroundColor: 'rgba(0,0,0,0.5)',\n    padding: 10\n  }\n});\nexport default WebCameraCapture;","map":{"version":3,"names":["React","useRef","useState","View","TouchableWithoutFeedback","Animated","StyleSheet","Dimensions","Text","Webcam","jsx","_jsx","jsxs","_jsxs","WebCameraCapture","_ref","onCapture","webcamRef","flashOpacity","Value","current","_useState","_useState2","_slicedToArray","tapCount","setTapCount","captureImage","console","log","prev","imageSrc","getScreenshot","sequence","timing","toValue","duration","useNativeDriver","start","setTimeout","style","styles","container","children","onPress","cameraContainer","audio","ref","screenshotFormat","videoConstraints","facingMode","width","ideal","get","height","webcam","tapCountText","flashOverlay","opacity","create","flex","position","overflow","objectFit","top","left","right","bottom","backgroundColor","zIndex","color","padding"],"sources":["/Users/dankupfer/Documents/dev/shopping/shopping/ShoppingClient/src/components/WebCameraCapture.tsx"],"sourcesContent":["import React, { useRef, useState } from 'react';\nimport { View, TouchableWithoutFeedback, Animated, StyleSheet, Dimensions, Text } from 'react-native';\nimport Webcam from 'react-webcam';\n\ninterface WebCameraCaptureProps {\n  onCapture: (image: string) => void;\n}\n\nconst WebCameraCapture: React.FC<WebCameraCaptureProps> = ({ onCapture }) => {\n  const webcamRef = useRef<Webcam>(null);\n  const flashOpacity = useRef(new Animated.Value(0)).current;\n  const [tapCount, setTapCount] = useState(0);\n\n  const captureImage = () => {\n    console.log('Capture image function called');\n    setTapCount(prev => prev + 1);\n    \n    if (webcamRef.current) {\n      console.log('Webcam ref exists');\n      const imageSrc = webcamRef.current.getScreenshot();\n      console.log('Screenshot:', !!imageSrc);\n      \n      if (imageSrc) {\n        console.log('Image source exists');\n        // Trigger flash animation\n        Animated.sequence([\n          Animated.timing(flashOpacity, {\n            toValue: 0.7,  // Reduced opacity to keep camera visible\n            duration: 100,\n            useNativeDriver: true\n          }),\n          Animated.timing(flashOpacity, {\n            toValue: 0,\n            duration: 100,\n            useNativeDriver: true\n          })\n        ]).start();\n\n        // Delay capture callback to allow flash to be visible\n        setTimeout(() => {\n          onCapture(imageSrc);\n        }, 100);\n      }\n    }\n  };\n\n  return (\n    <View style={styles.container}>\n      <TouchableWithoutFeedback onPress={captureImage}>\n        <View style={styles.cameraContainer}>\n          <Webcam\n            audio={false}\n            ref={webcamRef}\n            screenshotFormat=\"image/jpeg\"\n            videoConstraints={{\n              facingMode: \"environment\",\n              width: { ideal: Dimensions.get('window').height },\n              height: { ideal: Dimensions.get('window').width }\n            }}\n            style={styles.webcam}\n          />\n          <Text style={styles.tapCountText}>Taps: {tapCount}</Text>\n        </View>\n      </TouchableWithoutFeedback>\n      \n      <Animated.View \n        style={[\n          styles.flashOverlay, \n          { \n            opacity: flashOpacity,\n          }\n        ]} \n      />\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    position: 'relative',\n  },\n  cameraContainer: {\n    flex: 1,\n    overflow: 'hidden',\n  },\n  webcam: {\n    width: '100%',\n    height: '100%',\n    objectFit: 'cover' as any,\n  },\n  flashOverlay: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    right: 0,\n    bottom: 0,\n    backgroundColor: 'white',\n    zIndex: 10,\n  },\n  tapCountText: {\n    position: 'absolute',\n    top: 20,\n    left: 20,\n    color: 'white',\n    backgroundColor: 'rgba(0,0,0,0.5)',\n    padding: 10,\n  }\n});\n\nexport default WebCameraCapture;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}