{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useState } from \"react\";\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport axios from \"axios\";\nimport WebCameraCapture from \"./WebCameraCapture\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nvar PriceTagCapture = function PriceTagCapture() {\n  var _useState = useState(false),\n    _useState2 = _slicedToArray(_useState, 2),\n    isLoading = _useState2[0],\n    setIsLoading = _useState2[1];\n  var uploadImage = function () {\n    var _ref = _asyncToGenerator(function* (base64Image) {\n      var cleanBase64 = base64Image.includes(',') ? base64Image.split(',')[1] : base64Image;\n      setIsLoading(true);\n      try {\n        var response = yield axios.post('http://localhost:8080/api/price-tag/ocr', {\n          imageBase64: cleanBase64,\n          storeId: 'your-store-id-here'\n        });\n        if (response.data.success) {\n          Alert.alert('Success', `${response.data.action === 'updated' ? 'Updated' : 'Created'} product: ${response.data.productName}`);\n        } else {\n          throw new Error('Unexpected response');\n        }\n      } catch (error) {\n        if (axios.isAxiosError(error)) {\n          var _error$response, _error$response$data;\n          Alert.alert('Upload Error', ((_error$response = error.response) == null ? void 0 : (_error$response$data = _error$response.data) == null ? void 0 : _error$response$data.error) || 'Failed to upload image. Please try again.');\n        } else {\n          Alert.alert('Error', 'An unexpected error occurred. Please try again.');\n        }\n        console.error('Image upload error:', error);\n      } finally {\n        setIsLoading(false);\n      }\n    });\n    return function uploadImage(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n  if (isLoading) {\n    return _jsx(View, {\n      style: styles.container,\n      children: _jsx(ActivityIndicator, {\n        size: \"large\",\n        color: \"#0000ff\"\n      })\n    });\n  }\n  return _jsx(View, {\n    style: styles.container,\n    children: _jsx(WebCameraCapture, {\n      onCapture: uploadImage\n    })\n  });\n};\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    justifyContent: \"center\",\n    alignItems: \"center\"\n  }\n});\nexport default PriceTagCapture;","map":{"version":3,"names":["React","useState","View","StyleSheet","Alert","axios","WebCameraCapture","ActivityIndicator","jsx","_jsx","PriceTagCapture","_useState","_useState2","_slicedToArray","isLoading","setIsLoading","uploadImage","_ref","_asyncToGenerator","base64Image","cleanBase64","includes","split","response","post","imageBase64","storeId","data","success","alert","action","productName","Error","error","isAxiosError","_error$response","_error$response$data","console","_x","apply","arguments","style","styles","container","children","size","color","onCapture","create","flex","justifyContent","alignItems"],"sources":["/Users/dankupfer/Documents/dev/shopping/shopping/ShoppingClient/src/components/PriceTagCapture.tsx"],"sourcesContent":["import React, { useState } from \"react\";\nimport { \n  View, \n  StyleSheet,\n  Alert\n} from \"react-native\";\nimport axios from \"axios\";\nimport WebCameraCapture from \"./WebCameraCapture\";\nimport { ActivityIndicator } from \"react-native\";\n\nconst PriceTagCapture: React.FC = () => {\n  const [isLoading, setIsLoading] = useState(false);\n\n  const uploadImage = async (base64Image: string) => {\n    // Ensure base64 is properly formatted\n    const cleanBase64 = base64Image.includes(',') \n      ? base64Image.split(',')[1] \n      : base64Image;\n\n    setIsLoading(true);\n\n    try {\n      const response = await axios.post('http://localhost:8080/api/price-tag/ocr', {\n        imageBase64: cleanBase64,\n        storeId: 'your-store-id-here'\n      });\n\n      // Handle different response scenarios\n      if (response.data.success) {\n        Alert.alert(\n          'Success', \n          `${response.data.action === 'updated' ? 'Updated' : 'Created'} product: ${response.data.productName}`\n        );\n      } else {\n        throw new Error('Unexpected response');\n      }\n    } catch (error) {\n      // More detailed error handling\n      if (axios.isAxiosError(error)) {\n        // Network or server error\n        Alert.alert(\n          'Upload Error', \n          error.response?.data?.error || 'Failed to upload image. Please try again.'\n        );\n      } else {\n        // Generic error\n        Alert.alert(\n          'Error', \n          'An unexpected error occurred. Please try again.'\n        );\n      }\n      console.error('Image upload error:', error);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  // Render loading indicator if processing\n  if (isLoading) {\n    return (\n      <View style={styles.container}>\n        <ActivityIndicator size=\"large\" color=\"#0000ff\" />\n      </View>\n    );\n  }\n\n  return (\n    <View style={styles.container}>\n      <WebCameraCapture onCapture={uploadImage} />\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    justifyContent: \"center\",\n    alignItems: \"center\",\n  },\n});\n\nexport default PriceTagCapture;"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,QAAQ,OAAO;AAAC,OAAAC,IAAA;AAAA,OAAAC,UAAA;AAAA,OAAAC,KAAA;AAMxC,OAAOC,KAAK,MAAM,OAAO;AACzB,OAAOC,gBAAgB;AAA2B,OAAAC,iBAAA;AAAA,SAAAC,GAAA,IAAAC,IAAA;AAGlD,IAAMC,eAAyB,GAAG,SAA5BA,eAAyBA,CAAA,EAAS;EACtC,IAAAC,SAAA,GAAkCV,QAAQ,CAAC,KAAK,CAAC;IAAAW,UAAA,GAAAC,cAAA,CAAAF,SAAA;IAA1CG,SAAS,GAAAF,UAAA;IAAEG,YAAY,GAAAH,UAAA;EAE9B,IAAMI,WAAW;IAAA,IAAAC,IAAA,GAAAC,iBAAA,CAAG,WAAOC,WAAmB,EAAK;MAEjD,IAAMC,WAAW,GAAGD,WAAW,CAACE,QAAQ,CAAC,GAAG,CAAC,GACzCF,WAAW,CAACG,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GACzBH,WAAW;MAEfJ,YAAY,CAAC,IAAI,CAAC;MAElB,IAAI;QACF,IAAMQ,QAAQ,SAASlB,KAAK,CAACmB,IAAI,CAAC,yCAAyC,EAAE;UAC3EC,WAAW,EAAEL,WAAW;UACxBM,OAAO,EAAE;QACX,CAAC,CAAC;QAGF,IAAIH,QAAQ,CAACI,IAAI,CAACC,OAAO,EAAE;UACzBxB,KAAK,CAACyB,KAAK,CACT,SAAS,EACT,GAAGN,QAAQ,CAACI,IAAI,CAACG,MAAM,KAAK,SAAS,GAAG,SAAS,GAAG,SAAS,aAAaP,QAAQ,CAACI,IAAI,CAACI,WAAW,EACrG,CAAC;QACH,CAAC,MAAM;UACL,MAAM,IAAIC,KAAK,CAAC,qBAAqB,CAAC;QACxC;MACF,CAAC,CAAC,OAAOC,KAAK,EAAE;QAEd,IAAI5B,KAAK,CAAC6B,YAAY,CAACD,KAAK,CAAC,EAAE;UAAA,IAAAE,eAAA,EAAAC,oBAAA;UAE7BhC,KAAK,CAACyB,KAAK,CACT,cAAc,EACd,EAAAM,eAAA,GAAAF,KAAK,CAACV,QAAQ,sBAAAa,oBAAA,GAAdD,eAAA,CAAgBR,IAAI,qBAApBS,oBAAA,CAAsBH,KAAK,KAAI,2CACjC,CAAC;QACH,CAAC,MAAM;UAEL7B,KAAK,CAACyB,KAAK,CACT,OAAO,EACP,iDACF,CAAC;QACH;QACAQ,OAAO,CAACJ,KAAK,CAAC,qBAAqB,EAAEA,KAAK,CAAC;MAC7C,CAAC,SAAS;QACRlB,YAAY,CAAC,KAAK,CAAC;MACrB;IACF,CAAC;IAAA,gBA1CKC,WAAWA,CAAAsB,EAAA;MAAA,OAAArB,IAAA,CAAAsB,KAAA,OAAAC,SAAA;IAAA;EAAA,GA0ChB;EAGD,IAAI1B,SAAS,EAAE;IACb,OACEL,IAAA,CAACP,IAAI;MAACuC,KAAK,EAAEC,MAAM,CAACC,SAAU;MAAAC,QAAA,EAC5BnC,IAAA,CAACF,iBAAiB;QAACsC,IAAI,EAAC,OAAO;QAACC,KAAK,EAAC;MAAS,CAAE;IAAC,CAC9C,CAAC;EAEX;EAEA,OACErC,IAAA,CAACP,IAAI;IAACuC,KAAK,EAAEC,MAAM,CAACC,SAAU;IAAAC,QAAA,EAC5BnC,IAAA,CAACH,gBAAgB;MAACyC,SAAS,EAAE/B;IAAY,CAAE;EAAC,CACxC,CAAC;AAEX,CAAC;AAED,IAAM0B,MAAM,GAAGvC,UAAU,CAAC6C,MAAM,CAAC;EAC/BL,SAAS,EAAE;IACTM,IAAI,EAAE,CAAC;IACPC,cAAc,EAAE,QAAQ;IACxBC,UAAU,EAAE;EACd;AACF,CAAC,CAAC;AAEF,eAAezC,eAAe","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}